<!doctype html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="./cabecalho.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Say Me Always</title>
    
    <!-- Script para desbloquear autoplay -->
    <script>
      // Tenta desbloquear políticas de autoplay com um áudio silencioso
      window.addEventListener('DOMContentLoaded', function() {
        // Cria um elemento de áudio silencioso
        var silentAudio = document.createElement('audio');
        silentAudio.setAttribute('src', 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA');
        silentAudio.setAttribute('autoplay', 'true');
        silentAudio.setAttribute('muted', 'true');
        silentAudio.style.display = 'none';
        document.body.appendChild(silentAudio);
        
        // Tenta desbloquear autoplay com interação simulada
        function attemptAutoplay() {
          // Reproduz o áudio silencioso para desbloquear o autoplay
          silentAudio.play().catch(function() {
            console.log('Tentativa de desbloquear autoplay falhou, aguardando interação do usuário');
          });
          
          // Lista todos os iframes para enviar comando de reprodução
          setTimeout(function() {
            var iframes = document.querySelectorAll('iframe');
            iframes.forEach(function(iframe) {
              if (iframe.src.includes('spotify')) {
                console.log('Enviando comando de play para iframe do Spotify');
                try {
                  // Atualiza o src para forçar autoplay
                  if (!iframe.src.includes('autoplay=1')) {
                    var updatedSrc = iframe.src + (iframe.src.includes('?') ? '&' : '?') + 'autoplay=1&init=1&t=' + Date.now();
                    iframe.src = updatedSrc;
                  }
                  // Envia mensagem
                  setTimeout(function() {
                    try {
                      iframe.contentWindow.postMessage({ command: 'play' }, '*');
                    } catch(e) {
                      console.error('Erro ao enviar mensagem:', e);
                    }
                  }, 1000);
                } catch(e) {
                  console.error('Erro ao tentar manipular iframe:', e);
                }
              }
            });
          }, 1500);
        }
        
        // Tenta primeira vez
        attemptAutoplay();
        
        // Tenta novamente após 3 segundos
        setTimeout(attemptAutoplay, 3000);
        
        // Captura todas as interações do usuário
        ['click', 'touchstart', 'keydown', 'scroll', 'mousemove'].forEach(function(event) {
          document.addEventListener(event, function() {
            attemptAutoplay();
          }, {once: true});
        });
      });
    </script>

    <script type="module" crossorigin src="./assets/index-CEoxDQxL.js"></script>
    <link rel="stylesheet" crossorigin href="./assets/index-Cv8b76Vr.css">
  </head>
  <body>
    <div id="root"></div>
    <!-- Script auxiliar para garantir autoplay -->
    <script>
      // Executa após o carregamento completo
      window.addEventListener('load', function() {
        setTimeout(function() {
          // Simula interação do usuário após um tempo
          var event = new MouseEvent('click', {
            view: window,
            bubbles: true,
            cancelable: true
          });
          document.body.dispatchEvent(event);
          
          // Tenta reproduzir todos os iframes de Spotify
          document.querySelectorAll('iframe').forEach(function(iframe) {
            if (iframe.src.includes('spotify')) {
              // Força parâmetros de autoplay
              if (!iframe.src.includes('autoplay=1')) {
                iframe.src = iframe.src + (iframe.src.includes('?') ? '&' : '?') + 'autoplay=1&init=1&t=' + Date.now();
              }
              
              // Envia comando direto
              setTimeout(function() {
                try {
                  iframe.contentWindow.postMessage({ command: 'play' }, '*');
                } catch(e) {}
              }, 500);
            }
          });
        }, 1000);
      });
    </script>
  </body>
</html>
